var _zenId=navigator.cookieEnabled?window.localStorage.getItem("zenId"):0;const Zenapse=(()=>{const e={_CACHE_:"version=",isObjectEmpty:e=>0===Object.keys(e).length,makeBold:e=>`<strong>${e}</strong>`,isImage:e=>e&&"img"===e.nodeName.toLowerCase(),hashCode:e=>{let t;for(let n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return Math.abs(t).toString()},assetIdWithSite:t=>e.hashCode(`${window.zen.config.siteId}:${t}`),createElementFromHTML:(e,t)=>{var n=document.createElement("div");n.innerHTML=t.trim(),e.replaceWith(n.firstChild)},setHtml:(t,n)=>{let a=document.querySelectorAll(t);a.forEach(t=>e.isImage(t)?createElementFromHTML(t,n):t.innerHTML=n)},setAttributeProperty:({selector:e,value:t})=>{let n=e.split("|")[0].trim(),a=e.split("|")[1].trim(),i=document.querySelectorAll(n);i.forEach(e=>{e.setAttribute(a,t)})},checkStatus:e=>e.status.indexOf("z2")>-1&&""!==e.asset_id,getVersion:()=>Math.floor(1e10*Math.random()),setPredefinedProperties:e=>{let t=[];return e.forEach(e=>{t.push({name:e.name,value:e.value})}),t},setPipeDelimitedAssetId:e=>{var t="";return e.forEach(e=>{t+=e.value+"|"}),t.slice(0,-1)},setAssetProperties:(t,n)=>{var a=[];return t.forEach(e=>{a.push({name:e.name,value:e.value})}),a.push({name:"asset_id",value:e.assetIdWithSite(n)})},checkEndpoint:e=>-1!==e.indexOf("gw"),getHeaders:()=>e.checkEndpoint(window.zen.config.endpoint)?{"Content-Type":"application/json","x-api-key":window.token}:{"Content-Type":"application/json",Authorization:"Bearer "+window.token},setStyleSheet:t=>{var n=document.getElementsByTagName("head")[0],a=document.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=t+"?"+e._CACHE_+e.getVersion(),n.appendChild(a)},loadScript:t=>new Promise((n,a)=>{let i="?"+e._CACHE_+e.getVersion(),o=document.createElement("script");o.src=t+i,o.onload=(()=>n(o)),o.onerror=(()=>a(new Error(`Script load error for ${src}`))),document.body.appendChild(o)}),setText:(e,t)=>document.querySelector(e).innerText=t,setImgSrc:(e,t)=>{let n=document.querySelector(e);if(n&&"img"===n.nodeName.toLowerCase())return document.querySelector(e).src=t},getParam:e=>new URLSearchParams(window.location.search).get(e),zenCall:(t,n,a,i,o)=>{fetch(`${window.zen.config.endpoint}/${t}`,{method:n,headers:e.getHeaders()}).then(e=>o?e.json():e.text()).then(e=>i(e)).catch(e=>console.warn(e))},zenCallErr:(t,n,a,i,o,r)=>{fetch(`${window.zen.config.endpoint}/${t}`,{method:n,headers:e.getHeaders()}).then(e=>o?e.json():e.text()).then(e=>i(e)).catch(e=>r(e))},zenCallWithBody:(t,n,a,i,o,r)=>{const s=new AbortController,l=setTimeout(()=>s.abort(),1e4),d=async()=>{await fetch(`${window.zen.config.endpoint}/${t}`,{method:n,signal:s.signal,headers:e.getHeaders(),body:JSON.stringify(r)}).then(e=>o?e.json():e.text()).then(e=>i(e)).catch(e=>console.warn(e));clearTimeout(l)};d()},getParam:e=>{const t=new URLSearchParams(window.location.search);return t.get(e)?t.get(e):""},getNameFromSelector:e=>document.querySelector(e).textContent,fragmentEndpoint:"fragment",getLinksByText:e=>{const t=e.split("|")[0].toLowerCase().trim(),n=e.split("|")[1].toLowerCase().trim();return[...document.querySelectorAll(t)].filter(e=>e.textContent.toLowerCase().replace(/[\r\n]/gm,"").replace(/\s\s+/g," ").trim()===n.trim())},getLinks:t=>t.indexOf("|")>-1?e.getLinksByText(t):[...document.querySelectorAll(t)],pluckValue:(e,t)=>void 0!==t&&t?document.querySelector(e).value:document.querySelector(e).innerText,pluckRadioValues:e=>{const t=document.querySelectorAll(e.selector);let n=[];return t.forEach(t=>{t.checked&&n.push({name:e.name,value:t.dataset.value})}),n},getPipeValues:e=>({sel:e.split("|")[0].trim(),attr:e.split("|")[1].trim()}),pluckMetaTagValues:t=>{if(t.name.indexOf("|")>0){let{attr:n}=e.getPipeValues(t.name),a=document.querySelector(`meta[${n}=${t.selector}]`);return a?a.getAttribute("content"):null}{let e=null!==t.value&&""!==t.value?t.value:"name",n=document.querySelector(`meta[${e}=${t.selector}]`);return n?n.getAttribute("content"):null}},pluckAttributeValues:(e,t)=>{const n=e.selector.replace(/\[|\]/g,"");return[{name:e.name,value:t.getAttribute(n)}]},setDynamicListenerProperties:(t,n)=>{var a=[];return t.forEach(t=>{switch(t.type){case"text":a.push({name:t.name,value:e.pluckValue(t.selector)});break;case"radio":a.push(...e.pluckRadioValues(t));break;case"attribute":a=e.pluckAttributeValues(t,n);break;case"metatag":let i=e.pluckMetaTagValues(t),o=t.name;t.name.indexOf("|")>0&&(o=e.getPipeValues(t.name).sel),i&&a.push({name:o,value:i,meta:!0});break;default:a.push({name:t.name,value:e.pluckValue(t.selector,!0)})}}),a},getMetaLabels:(e,t)=>{e.toLowerCase()},createParamKeyValuePairs:t=>{let n=[],a=!1;return t.forEach(t=>{let i=e.getParam(t);i&&(a=!0,n.push({name:t,value:i}))}),{paramList:n,shouldSend:a}},createBothParamKeyValuePairs:t=>{let n=[];return t.forEach(t=>{let a=e.getParam(t);a&&n.push({name:t,value:a},{name:"asset_id",value:e.assetIdWithSite(a)})}),{paramList:n}}},t=e=>{var t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelector('[id^="zenSerendipities"]').outerHTML,i=document.createElement("div");i.innerHTML=a,document.body.appendChild(i)},n=e=>{var t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelector('[id^="zenSerendipyResult"]').outerHTML,i=document.querySelector("#zenSerendipities");i.insertAdjacentHTML("beforeend",a),document.body.appendChild(i)},a=t=>{let{param:n,value:a}=pageData.split;const i=window.location.pathname===t?a:"split";e.getParam(n)&&window.location.replace(t+"?"+n+"="+i)},i={setClickPrediction:t=>{let{optId:n,variations:a,trigger:i}=t;document.addEventListener("click",t=>{t.target.matches(i)&&e.zenCallErr("prediction?clientId="+window.zen.config.clientId+"&optimizationId="+n+"&zenId="+_zenId+"&placementUrl="+window.location.pathname+"&siteId="+window.zen.config.siteId,"POST","application/json",t=>{let n=e.checkStatus(t)?t.asset_id:Object.keys(a)[0];if(!n)return!1;a[n].forEach(t=>{5===t.type?e.setAttributeProperty(t):e.setHtml(t.selector,t.value)})},!0,e=>{console.warn(e)})})},setPageLoadPrediction:t=>{let{optId:n,variations:a}=t;e.zenCallErr("prediction?clientId="+window.zen.config.clientId+"&optimizationId="+n+"&zenId="+_zenId+"&placementUrl="+window.location.pathname+"&siteId="+window.zen.config.siteId+"&"+e._CACHE_+e.getVersion(),"POST","application/json",t=>{let n=e.checkStatus(t)?t.asset_id:Object.keys(a)[0];if(!n)return!1;a[n].forEach(t=>{5===t.type?e.setAttributeProperty(t):e.setHtml(t.selector,t.value)})},!0,e=>{console.warn(e)})},setPredictionEvents:()=>{pageData.predictions.forEach(e=>{switch(e.triggerType){case 1:i.setClickPrediction(e);break;case 2:i.setPageLoadPrediction(e)}})},setSplitAsAPrediction:()=>{let{optId:t}=pageData.split;e.zenCall("prediction?clientId="+window.zen.config.clientId+"&optimizationId="+t+"&zenId="+_zenId+"&placementUrl="+window.location.pathname+"&siteId="+window.zen.config.siteId,"POST","application/json",e=>a(e.content_URL),!0)},setSerendipity:()=>{if(s()){const{q_html:a,r_html:i,js:o}=pageData.serendipity,r=e.getVersion();fetch(a+"?"+e._CACHE_+r).then(function(e){return e.text()}).then(function(e){t(e)}).then(function(){fetch(i+"?"+e._CACHE_+r).then(function(e){return e.text()}).then(function(t){n(t),""!==t.js&&(e.loadScript(o),e.setStyleSheet(`${zen.config.cdnPath}/dist/zen_insight_V3.min.css`))}).catch(function(e){console.warn("Something went wrong.",e)})}).catch(function(e){console.warn("Something went wrong.",e)})}},setEachClickEvent:()=>{pageData.listeners.forEach(e=>{switch(e.type){case 1:c(e);break;case 2:u(e);break;case 3:g(e);break;case 4:w(e);break;case 5:d(e)}})}},o={sendAdValuesToGraph:()=>{let{interactions:t,targets:n,labels:a,eventname:i}=pageData.adparams,{paramList:o,shouldSend:r}=e.createParamKeyValuePairs(t);r&&e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:i,targetLabels:a.join(","),targetProps:e.createBothParamKeyValuePairs(n).paramList,interactionProps:o})},linkUserWithData:()=>{let t=pageData.links||null;if(!t)return;let n=[];t.forEach(e=>{if("localstorage"===e.type.toLowerCase()){let t=window.localStorage.getItem(e.name);t&&n.push({name:e.name,value:window.localStorage.getItem(e.name)})}e.type.toLowerCase()}),0!=n.length&&e.zenCallWithBody("link?siteId="+window.zen.config.siteId+"&zenId="+_zenId,"POST","application/json",e=>{},!1,n)}},r=e=>{switch(e){case"split":i.setSplitAsAPrediction();break;case"predictions":i.setPredictionEvents();break;case"listeners":i.setEachClickEvent();break;case"serendipity":i.setSerendipity();break;case"adparams":o.sendAdValuesToGraph();break;case"links":o.linkUserWithData()}},s=()=>{if(2==pageData.serendipity.displayTypeId&&!1===window.zen.preview){const e=Math.floor(99*Math.random())+1;if(e>5)return!1}return!0},l=()=>{if("undefined"==typeof pageData)return!1;pageData.events.forEach(e=>{r(e)})},d=t=>{if(t.trigger){new Event(t.trigger);document.addEventListener(t.trigger,function(n){let a=e.setPredefinedProperties(t.properties);e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:t.eventname,targetLabels:t.labels.join(","),targetProps:a})},!1)}},c=t=>{if(t.trigger)document.addEventListener("mousedown",n=>{const a=e.getLinks(t.trigger);a.forEach(a=>{if(n.target===a){let n=e.setPredefinedProperties(t.properties);e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:t.eventname,targetLabels:t.labels.join(","),targetProps:n})}})});else{let n=e.setPredefinedProperties(t.properties);e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:t.eventname,targetLabels:t.labels.join(","),targetProps:n})}},p=t=>{const{trigger:n,labels:a,eventname:i,properties:o}=t,r=e.getLinks(n);r.forEach(t=>{document.addEventListener("mousedown",n=>{if(n.target===t){var r=e.setDynamicListenerProperties(o,t);if(1===o.length&&r.forEach((t,n)=>{setTimeout(()=>{e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:i,targetLabels:a.join(","),targetProps:[{name:t.name,value:t.value},{name:"asset_id",value:e.assetIdWithSite(t.value)}]})},500)}),o.length>1){var s=e.setPipeDelimitedAssetId(r),l=e.setAssetProperties(r,s);e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:i,targetLabels:a.join(","),targetProps:l})}}})})},m=t=>{const{labels:n,eventname:a,properties:i}=t;var o=e.setDynamicListenerProperties(i);o.forEach(t=>{e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:t.meta?"MetaView":a,targetLabels:t.meta?"Observed,Meta,Target":n.join(","),targetProps:[{name:t.name,value:t.value},{name:"asset_id",value:e.assetIdWithSite(t.value)}]})})},u=e=>{1===e.triggerType?setTimeout(()=>{p(e)},3e3):2===e.triggerType&&m(e)},g=t=>{const{labels:n,eventname:a,properties:i}=t;var o=e.setPredefinedProperties(i);e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:a,targetLabels:n.join(","),targetProps:o})},w=t=>{const{labels:n,eventname:a}=t,i="/"===window.location.pathname?"":window.location.pathname,o=`${window.location.origin}${i}`;e.zenCallWithBody(e.fragmentEndpoint,"POST","application/json",e=>{},!1,{clientId:window.zen.config.clientId,siteId:window.zen.config.siteId,zenId:_zenId,eventName:a,targetLabels:n.join(","),targetProps:[{name:"asset_id",value:e.assetIdWithSite(o)},{name:"url",value:o}]})},h=e=>{if(!e)throw new Error("Error: Missing config.")},f=e=>{let t=window.zen.d.vanities[e],n=window.zen.d.vanities["*"],a=void 0!==t?window.zen.d.pages[t]:window.zen.d.pages[n],i=a===window.zen.d.pages[n];return{wildcard:i,settings:a}},I=()=>{if(0===Object.keys(window.zen.d.vanities).length)return!1;let e=window.location.pathname,t="/"!==e?window.location.pathname.replace(/\/$/,""):e;const{wildcard:n,settings:a}=f(t);if(n&&"/"===e)return!1;a?window.pageData=a.hasOwnProperty("uses")?window.zen.d.pages[a.uses]:a:(z(),console.warn("no matching config version found"))},z=()=>{document.querySelector("html").style.opacity=1},v=e=>{if(!window.zen.config.clientId&&!window.zen.config.siteId)throw z(),new Error("configuration not set");I(),h(e),l(),setTimeout(()=>{z()},1500)};return{init:v,Predictions:i,Utilities:e}})();Zenapse.init({env:window.zen.d});